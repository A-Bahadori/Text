public static string GetCompilerErrorDetailsUsingReflection(CompilerResults results)
{
    if (results == null)
        return "Compilation results are empty";
        
    // Access errors collection using Reflection
    PropertyInfo errorsProperty = results.GetType().GetProperty("Errors");
    object errorsCollection = errorsProperty.GetValue(results, null);
    
    // Check if there are any errors
    PropertyInfo hasErrorsProperty = errorsCollection.GetType().GetProperty("HasErrors");
    bool hasErrors = (bool)hasErrorsProperty.GetValue(errorsCollection, null);
    
    if (!hasErrors)
        return "No errors";
    
    // Access error count
    PropertyInfo countProperty = errorsCollection.GetType().GetProperty("Count");
    int errorCount = (int)countProperty.GetValue(errorsCollection, null);
    
    StringBuilder sb = new StringBuilder();
    sb.AppendLine($"Number of errors: {errorCount}");
    
    // Access individual errors
    int actualErrors = 0;
    int warningCount = 0;
    
    // First approach: Using GetEnumerator
    MethodInfo getEnumeratorMethod = errorsCollection.GetType().GetMethod("GetEnumerator");
    object enumerator = getEnumeratorMethod.Invoke(errorsCollection, null);
    
    MethodInfo moveNextMethod = enumerator.GetType().GetMethod("MoveNext");
    PropertyInfo currentProperty = enumerator.GetType().GetProperty("Current");
    
    while ((bool)moveNextMethod.Invoke(enumerator, null))
    {
        object error = currentProperty.GetValue(enumerator, null);
        
        // Get error properties using Reflection
        PropertyInfo lineProperty = error.GetType().GetProperty("Line");
        PropertyInfo columnProperty = error.GetType().GetProperty("Column");
        PropertyInfo errorTextProperty = error.GetType().GetProperty("ErrorText");
        PropertyInfo errorNumberProperty = error.GetType().GetProperty("ErrorNumber");
        PropertyInfo isWarningProperty = error.GetType().GetProperty("IsWarning");
        PropertyInfo fileNameProperty = error.GetType().GetProperty("FileName");
        
        int line = (int)lineProperty.GetValue(error, null);
        int column = (int)columnProperty.GetValue(error, null);
        string errorText = (string)errorTextProperty.GetValue(error, null);
        string errorNumber = (string)errorNumberProperty.GetValue(error, null);
        bool isWarning = (bool)isWarningProperty.GetValue(error, null);
        string fileName = (string)fileNameProperty.GetValue(error, null);
        
        if (isWarning)
            warningCount++;
        else
            actualErrors++;
            
        sb.AppendLine($"[{(isWarning ? "Warning" : "Error")}] in file {fileName}");
        sb.AppendLine($"Line {line}, Column {column}: {errorText} (Error code: {errorNumber})");
        sb.AppendLine("-------------------------");
    }
    
    sb.AppendLine($"Summary: {actualErrors} errors, {warningCount} warnings");
    
    return sb.ToString();
}
